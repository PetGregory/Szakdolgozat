<div class="py-8  px-4   max-w-4xl mx-auto">
    <div class="mb-8">
      <h1 class="text-3xl font-bold mb-2" 
       [ngClass]="{
        'text-gray-900': !darkModeService.darkMode(),
        'text-white' : darkModeService.darkMode()
      }">
        Nutrition Tracker
      </h1>
   
      <p class="text-sm" 
         [ngClass]="{
           'text-gray-600': !darkModeService.darkMode(),
           'text-gray-300': darkModeService.darkMode()
         }"> Search for foods and track your daily calorie intake </p>
    </div>
   
    <div *ngIf="user?.calorieTarget" 
         class="mb-6 p-6 rounded-lg"
         [ngClass]="{
          'bg-blue-50 border-2 border-blue-200': !darkModeService.darkMode(),
          'bg-blue-900 border-2 border-blue-700': darkModeService.darkMode()
         }">
      
      <div class="flex justify-between items-center mb-2">
         <div class="text-lg font-semibold" [ngClass]="{
             'text-blue-900': !darkModeService.darkMode(),
             'text-blue-100': darkModeService.darkMode()
           }">Daily Calorie Progress</div>
         
         <div class="text-2xl font-bold" 
              [ngClass]="{
                'text-blue-600': !darkModeService.darkMode(),
                'text-blue-300': darkModeService.darkMode()
              }">
              {{ totalCaloriesToday }} / {{ user.calorieTarget }} kcal
         </div>
      </div>
   
      <div class="w-full bg-gray-200 rounded-full h-4 mb-2"
           [ngClass]="{'bg-gray-700': darkModeService.darkMode()}">
         <div class="h-4 rounded-full transition-all duration-300"
              [ngClass]="{
                'bg-blue-600': getProgressPercentage() <= 100,
                'bg-red-600': getProgressPercentage() > 100
              }"
              [style.width.%]="getProgressPercentage()"></div>
      </div>
   
      <div class="text-sm" [ngClass]="{
           'text-blue-700': !darkModeService.darkMode(),
           'text-blue-200': darkModeService.darkMode()
         }">
         <span *ngIf="getRemainingCalories() >= 0">
            {{ getRemainingCalories() }} kcal remaining
         </span>
         <span *ngIf="getRemainingCalories() < 0" 
               class="text-red-600 dark:text-red-400">
            {{ Math.abs(getRemainingCalories()) }} kcal over target
         </span>
      </div>
    </div>
   
    <div class="mb-6 p-6 rounded-lg"
         [ngClass]="{
           'bg-white shadow-lg': !darkModeService.darkMode(),
           'bg-gray-800': darkModeService.darkMode()
         }">
         
         <h2 class="text-xl font-semibold mb-4"
           [ngClass]="{
             'text-gray-900': !darkModeService.darkMode(),
             'text-white': darkModeService.darkMode()
           }"> Search Food </h2>
         
         <div class="flex gap-2 mb-4">
           <input type="text"
             [(ngModel)]="searchQuery"
             (keyup.enter)="searchFood()"
             placeholder="Search for food..."
             class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2"
             [ngClass]="{
               'border-gray-300 bg-white': !darkModeService.darkMode(),
               'border-gray-600 bg-gray-700 text-white': darkModeService.darkMode()
             }" />
   
           <button (click)="searchFood()"
             [disabled]="isLoading || !searchQuery.trim()"
             class="px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50"
             [ngClass]="{
               'bg-blue-600 text-white hover:bg-blue-700': !darkModeService.darkMode() && !isLoading,
               'bg-blue-500 text-white hover:bg-blue-600': darkModeService.darkMode() && !isLoading
             }">
               <span *ngIf="!isLoading">Search</span>
               <span *ngIf="isLoading">Searching...</span>
           </button>
         </div>
   
         <div *ngIf="searchResults.length > 0" class="space-y-2 mb-4">
           <div *ngFor="let food of searchResults"
             (click)="selectFood(food)"
             class="p-4 border rounded-lg cursor-pointer transition-all hover:scale-105"
             [ngClass]="{
               'border-gray-200 hover:border-blue-500': !darkModeService.darkMode() && selectedFood?.name !== food.name,
               'border-blue-500 bg-blue-50': !darkModeService.darkMode() && selectedFood?.name === food.name,
               'border-gray-600 hover:border-blue-400': darkModeService.darkMode() && selectedFood?.name !== food.name,
               'border-blue-400 bg-blue-900': darkModeService.darkMode() && selectedFood?.name === food.name
             }">
               <div class="font-semibold" 
                 [ngClass]="{
                   'text-gray-900': !darkModeService.darkMode(),
                   'text-white': darkModeService.darkMode()
                 }">{{ food.name }}</div>
               <div class="text-sm mt-1"
                 [ngClass]="{
                   'text-gray-600': !darkModeService.darkMode(),
                   'text-gray-300': darkModeService.darkMode()
                 }">{{ food.calories }} kcal per {{ food.serving_size_g }}g</div>
           </div>
         </div>
   
         <div *ngIf="selectedFood" class="mt-4 p-4 border rounded-lg"
           [ngClass]="{
             'border-blue-200 bg-blue-50': !darkModeService.darkMode(),
             'border-blue-700 bg-blue-900': darkModeService.darkMode()
           }">
           <div class="font-semibold mb-2"
             [ngClass]="{
               'text-blue-900': !darkModeService.darkMode(),
               'text-blue-100': darkModeService.darkMode()
             }">Add {{ selectedFood.name }}</div>
   
           <div class="flex gap-2 items-end">
             <div class="flex-1">
               <label class="block text-sm mb-1"
                 [ngClass]="{
                   'text-gray-700': !darkModeService.darkMode(),
                   'text-gray-300': darkModeService.darkMode()
                 }">Amount (grams)</label>
               <input type="number"
                 [(ngModel)]="amountInGrams"
                 min="1"
                 class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2"
                 [ngClass]="{
                   'border-gray-300 bg-white': !darkModeService.darkMode(),
                   'border-gray-600 bg-gray-700 text-white': darkModeService.darkMode()
                 }" />
             </div>
   
             <div class="text-sm font-semibold"
               [ngClass]="{
                 'text-blue-700': !darkModeService.darkMode(),
                 'text-blue-200': darkModeService.darkMode()
               }">
                 = {{ getCalculatedCalories() }} kcal
             </div>
   
             <button (click)="addFood()"
               class="px-6 py-2 rounded-lg font-semibold transition-colors"
               [ngClass]="{
                 'bg-green-600 text-white hover:bg-green-700': !darkModeService.darkMode(),
                 'bg-green-500 text-white hover:bg-green-600': darkModeService.darkMode()
               }">Add</button>
           </div>
         </div>
     </div>
   
     <div class="p-6 rounded-lg"
          [ngClass]="{
            'bg-white shadow-lg': !darkModeService.darkMode(),
            'bg-gray-800': darkModeService.darkMode()
          }">
         <h2 class="text-xl font-semibold mb-4"
           [ngClass]="{
             'text-gray-900': !darkModeService.darkMode(),
             'text-white': darkModeService.darkMode()
           }">Today's Food Entries</h2>
   
         <div *ngIf="todayEntries.length === 0"
              class="text-center py-8"
              [ngClass]="{
                'text-gray-500': !darkModeService.darkMode(),
                'text-gray-400': darkModeService.darkMode()
              }">
              No food entries for today. Start tracking your meals!
         </div>
   
         <div *ngIf="todayEntries.length > 0" class="space-y-3">
           <div *ngFor="let entry of todayEntries"
             class="p-4 border rounded-lg flex justify-between items-center"
             [ngClass]="{
               'border-gray-200 bg-gray-50': !darkModeService.darkMode(),
               'border-gray-600 bg-gray-700': darkModeService.darkMode()
             }">
               <div class="flex-1">
                 <div class="font-semibold"
                   [ngClass]="{
                     'text-gray-900': !darkModeService.darkMode(),
                     'text-white': darkModeService.darkMode()
                   }">{{ entry.name }}</div>
                 <div class="text-sm mt-1"
                   [ngClass]="{
                     'text-gray-600': !darkModeService.darkMode(),
                     'text-gray-300': darkModeService.darkMode()
                   }">
                   {{ entry.amount }}g • {{ entry.calories }} kcal • {{ entry.protein }}g protein
                 </div>
               </div>
   
               <button (click)="removeFoodEntry(entry.id)"
                 class="ml-4 px-4 py-2 rounded-lg font-semibold transition-colors"
                 [ngClass]="{
                   'bg-red-500 text-white hover:bg-red-600': !darkModeService.darkMode(),
                   'bg-red-600 text-white hover:bg-red-700': darkModeService.darkMode()
                 }">Remove</button>
           </div>
         </div>
     </div>
   </div>
   